exit
session[:id]
session[:user_id]
@current_user ||= User.find(session[:user_id]) if session[:id]
current_user
logged_in?
exit
User.find(session[:user_id])
current_user
session[:user_id]
session
logged_in?
exit
self.point_transactions.joins(:transaction_types)
self.point_transactions
self
point_transactions.joins(:transaction_type).where(transaction_type_id: 4).sum(:point_change)
point_transactions.joins(:transaction_type).where(transaction_type: {name: 'Transaction Type 7'}).sum(:point_change)
user.point_transactions.joins(:transaction_type).where(transaction_type: {name: 'Transaction Type 7'}).sum(:point_change)
